<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css    " />
    <title>Document</title>
</head>

<body class="bg-dark text-light">
    <div class="text-warning text-center mt-3" id="alert"></div>
    <div class="d-flex mx-auto">
        <div class="p-2 border border-1 w-50 mt-5 rounded">
            <div class="text-center bg-success-primary rounded">
                Registration Form
            </div>
            <div class="mx-auto p-2">
                <label class="form-label">Name</label>
                <input class="form-control" id="name" type="text" placeholder="Your name"
                    aria-label="default input example" />
            </div>
            <div class="mx-auto p-2">
                <label class="form-label">Age</label>
                <input class="form-control" id="age" type="text" placeholder="Your age"
                    aria-label="default input example" />
            </div>
            <div class="mx-auto p-2">
                <label class="form-label">Phone Number</label>
                <input class="form-control" id="pno" type="text" placeholder="Your Number"
                    aria-label="default input example" />
            </div>
            <div class="mx-auto p-2">
                <label class="form-label">Email address</label>
                <input type="email" id="email" class="form-control" placeholder="abc@gmail.com" />
            </div>
            <div class="text-center">
                <div class="d-inline col-3 mx-auto">
                    <button type="button" class="btn btn-outline-success btn-lg" onclick="register()">
                        Register
                    </button>
                </div>
                <div class="d-inline col-3 mx-auto">
                    <button type="button" class="btn btn-outline-danger btn-lg" onclick="del()">
                        Delete
                    </button>
                </div>
                <div class="d-inline col-3 mx-auto">
                    <button type="button" class="btn btn-outline-primary btn-lg" onclick="">
                        Update
                    </button>
                </div>
            </div>
        </div>

    
        <table class="table table-dark table-striped w-50 d-inline mt-5 ms-5" id="myTable">
            <thead>
                <th scope="col"></th>
                <th scope="col">Name</th>
                <th scope="col">Age</th>
                <th scope="col">Phone Number</th>
                <th scope="col">Email</th>
            </thead>
            <tbody id="myBody" class=""></tbody>
        </table>
    </div>
</body>

<script>
    function register() {
        var refToMyBody = document.getElementById("myBody");
        var refToName = document.getElementById("name");
        var refToAge = document.getElementById("age");
        var refToPhoneNumber = document.getElementById("pno");
        var refToEmail = document.getElementById("email");

        if (
            refToName.value === "" ||
            refToAge.value === "" ||
            refToPhoneNumber.value === "" ||
            refToEmail.value === ""
        ) {
            document.getElementById("alert").innerText =
                "All the fields are required !";
            return;
        }

        if (isNaN(refToAge.value) || parseFloat(refToAge.value) <= 0) {
            document.getElementById("alert").innerText =
                "Please enter a valid age !";

            return;
        }

        if (
            isNaN(refToPhoneNumber.value) ||
            refToPhoneNumber.value.length != 10
        ) {
            document.getElementById("alert").innerText =
                "Please enter a valid Phone Number !";
            return;
        }

        var emailPattern = /^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/;
        if (!emailPattern.test(refToEmail.value)) {
            document.getElementById("alert").innerText =
                "Please enter a valid Email address !";
            return;
        }

        refToMyBody.innerHTML =
            refToMyBody.innerHTML +
        `<tr>
        <td><input class="form-check-input" type="checkbox" ></td>
        <td>${refToName.value}</td>
        <td>${refToAge.value}</td>
        <td>${refToPhoneNumber.value}</td>
        <td>${refToEmail.value}</td>
        </tr>`;

        document.getElementById("alert").innerText = "Data added successfully!";
        //   refToName.value = "";
        //   refToAge.value = "";
        //   refToPhoneNumber.value = "";
        //   refToEmail.value = "";
    }

    function del() {
        debugger;
        var myBody = document.getElementById("myBody");
        var rows = myBody.rows.length;
        // console.log(rows);
        // console.log(myBody.rows[0].cells[0].children[0].checked)
        if(rows>0){
            for (var i = rows-1; i >= 0; i--) {
                if (myBody.rows[i].cells[0].children[0].checked) {
                    myBody.deleteRow(i);
                }
            }
            document.getElementById("alert").innerText = "Data deleted successfully!";
        }else{
            document.getElementById("alert").innerText = "No rows to delete !";

        }

    }
</script>

</html>